<!DOCTYPE html>
<html>
<head>
    <title>Satellite Tracker</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        #satelliteMap {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Satellite Tracker</h1>
        <div id="satelliteMap"></div>
    </div>

    <script>
        // Sample satellite data (you would replace this with actual data loading)
        const satelliteData = {
            'S2A': { longitude: 0, latitude: 0 },
            'S2B': { longitude: 0, latitude: 0 }
        };
        
        const colors = ['blue', 'red'];
        const sats = ['S2A', 'S2B'];
        
        // Create figure
        const fig = {
            data: [],
            layout: {
                geo: {
                    showcountries: true,
                    countrycolor: "Black",
                    projection: {
                        type: "natural earth"
                    },
                    showcoastlines: true
                },
                showlegend: true,
                width: 1400,
                height: 600,
                margin: { t: 0, b: 0, l: 0, r: 0 }
            }
        };
        
        // Function to update satellite positions
        function updateSatellitePositions() {
            // In a real implementation, you would fetch this data from your JSON files
            // For this example, we'll just simulate some movement
            sats.forEach(sat => {
                satelliteData[sat].longitude = (satelliteData[sat].longitude + 5) % 360 - 180;
                satelliteData[sat].latitude = (satelliteData[sat].latitude + 2) % 180 - 90;
            });
            
            // Clear existing traces except grid lines (which have showlegend=false)
            while(fig.data.length > 0) {
                fig.data.pop();
            }
            
            // Add satellite markers
            sats.forEach((sat, idx) => {
                const lon = satelliteData[sat].longitude;
                const lat = satelliteData[sat].latitude;
                
                fig.data.push({
                    type: 'scattergeo',
                    lon: [lon],
                    lat: [lat],
                    mode: 'markers',
                    marker: {
                        size: 10,
                        color: colors[idx]
                    },
                    hoverinfo: 'text',
                    hovertext: `<br>Longitude: ${lon}<br>Latitude: ${lat}`,
                    name: sat,
                    showlegend: true
                });
            });
            
            // Add longitude and latitude grid lines
            for (let lon = -180; lon <= 180; lon += 10) {
                fig.data.push({
                    type: 'scattergeo',
                    lon: Array(181).fill(lon),
                    lat: Array.from({length: 181}, (_, i) => -90 + i),
                    mode: 'lines',
                    line: {
                        color: 'rgba(0,0,0,0.2)',
                        width: 1
                    },
                    showlegend: false
                });
            }
            
            for (let lat = -90; lat <= 90; lat += 10) {
                fig.data.push({
                    type: 'scattergeo',
                    lon: Array.from({length: 361}, (_, i) => -180 + i),
                    lat: Array(361).fill(lat),
                    mode: 'lines',
                    line: {
                        color: 'rgba(0,0,0,0.2)',
                        width: 1
                    },
                    showlegend: false
                });
            }
            
            // Update the plot
            Plotly.react('satelliteMap', fig.data, fig.layout);
        }
        
        // Initialize the plot
        document.addEventListener('DOMContentLoaded', function() {
            Plotly.newPlot('satelliteMap', fig.data, fig.layout);
            updateSatellitePositions();
            
            // Update positions every 10 seconds
            setInterval(updateSatellitePositions, 10000);
        });
    </script>
</body>
</html>
